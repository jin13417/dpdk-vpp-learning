<mxfile host="app.diagrams.net" modified="2021-12-26T09:12:24.771Z" agent="5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.107 Safari/537.36" etag="OR6zlZk6zzS71Uc-oOeA" version="16.0.0" type="github">
  <diagram id="l_xTGjEDLuFCOCQ6yGdL" name="Page-1">
    <mxGraphModel dx="782" dy="380" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="BXAtRn4mZZ8piuDLXr6t-1" value="NAT-ED&amp;nbsp;" style="text;html=1;strokeColor=#d79b00;fillColor=#ffe6cc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;dashPattern=1 2;" vertex="1" parent="1">
          <mxGeometry y="20" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="BXAtRn4mZZ8piuDLXr6t-2" value="snat_main_t&#xa;Nat-ed 管理结构" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=40;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;strokeColor=#d79b00;fillColor=#ffe6cc;" vertex="1" parent="1">
          <mxGeometry x="40" y="150" width="280" height="1450" as="geometry" />
        </mxCell>
        <mxCell id="BXAtRn4mZZ8piuDLXr6t-3" value="u32 num_workers;&#xa;u32 first_worker_index;&#xa;u32 *workers;&#xa;u16 port_per_thread;" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="BXAtRn4mZZ8piuDLXr6t-2">
          <mxGeometry y="40" width="280" height="70" as="geometry" />
        </mxCell>
        <mxCell id="BXAtRn4mZZ8piuDLXr6t-5" value="snat_main_per_thread_data_t *per_thread_data;" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="BXAtRn4mZZ8piuDLXr6t-2">
          <mxGeometry y="110" width="280" height="24" as="geometry" />
        </mxCell>
        <mxCell id="BXAtRn4mZZ8piuDLXr6t-6" value="snat_static_mapping_t *static_mappings;" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="BXAtRn4mZZ8piuDLXr6t-2">
          <mxGeometry y="134" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="BXAtRn4mZZ8piuDLXr6t-7" value="  clib_bihash_8_8_t in2out;&#xa;  clib_bihash_8_8_t out2in;" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="BXAtRn4mZZ8piuDLXr6t-2">
          <mxGeometry y="164" width="280" height="36" as="geometry" />
        </mxCell>
        <mxCell id="BXAtRn4mZZ8piuDLXr6t-8" value="clib_bihash_16_8_t flow_hash;" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="BXAtRn4mZZ8piuDLXr6t-2">
          <mxGeometry y="200" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="BXAtRn4mZZ8piuDLXr6t-9" value="  snat_interface_t *interfaces;&#xa;  snat_interface_t *output_feature_interfaces;&#xa;  // broken api backward compatibility&#xa;  snat_interface_t *output_feature_dummy_interfaces;" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="BXAtRn4mZZ8piuDLXr6t-2">
          <mxGeometry y="230" width="280" height="70" as="geometry" />
        </mxCell>
        <mxCell id="BXAtRn4mZZ8piuDLXr6t-10" value="  snat_address_t *addresses;&#xa;  snat_address_t *twice_nat_addresses;" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="BXAtRn4mZZ8piuDLXr6t-2">
          <mxGeometry y="300" width="280" height="40" as="geometry" />
        </mxCell>
        <mxCell id="BXAtRn4mZZ8piuDLXr6t-11" value="  u32 *auto_add_sw_if_indices;&#xa;  u32 *auto_add_sw_if_indices_twice_nat;" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="BXAtRn4mZZ8piuDLXr6t-2">
          <mxGeometry y="340" width="280" height="40" as="geometry" />
        </mxCell>
        <mxCell id="BXAtRn4mZZ8piuDLXr6t-12" value="nat_alloc_out_addr_and_port_function_t &#xa;*alloc_addr_and_port;" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="BXAtRn4mZZ8piuDLXr6t-2">
          <mxGeometry y="380" width="280" height="40" as="geometry" />
        </mxCell>
        <mxCell id="BXAtRn4mZZ8piuDLXr6t-13" value="nat_addr_and_port_alloc_alg_t &#xa;addr_and_port_alloc_alg;" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="BXAtRn4mZZ8piuDLXr6t-2">
          <mxGeometry y="420" width="280" height="40" as="geometry" />
        </mxCell>
        <mxCell id="BXAtRn4mZZ8piuDLXr6t-14" value="  u8 psid_offset; MAP-E 参数&#xa;  u8 psid_length;&#xa;  u16 psid;   " style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="BXAtRn4mZZ8piuDLXr6t-2">
          <mxGeometry y="460" width="280" height="50" as="geometry" />
        </mxCell>
        <mxCell id="BXAtRn4mZZ8piuDLXr6t-15" value="  u16 start_port;&#xa;  u16 end_port;" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="BXAtRn4mZZ8piuDLXr6t-2">
          <mxGeometry y="510" width="280" height="40" as="geometry" />
        </mxCell>
        <mxCell id="BXAtRn4mZZ8piuDLXr6t-16" value="nat_fib_t *fibs;" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="BXAtRn4mZZ8piuDLXr6t-2">
          <mxGeometry y="550" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="BXAtRn4mZZ8piuDLXr6t-17" value="nat_outside_fib_t *outside_fibs;" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="BXAtRn4mZZ8piuDLXr6t-2">
          <mxGeometry y="580" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="BXAtRn4mZZ8piuDLXr6t-18" value="snat_static_map_resolve_t *to_resolve;" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="BXAtRn4mZZ8piuDLXr6t-2">
          <mxGeometry y="610" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="BXAtRn4mZZ8piuDLXr6t-19" value="u32 random_seed;" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="BXAtRn4mZZ8piuDLXr6t-2">
          <mxGeometry y="640" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="BXAtRn4mZZ8piuDLXr6t-20" value="  u32 fq_in2out_index;&#xa;  u32 fq_in2out_output_index;&#xa;  u32 fq_out2in_index;" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="BXAtRn4mZZ8piuDLXr6t-2">
          <mxGeometry y="670" width="280" height="50" as="geometry" />
        </mxCell>
        <mxCell id="BXAtRn4mZZ8piuDLXr6t-22" value="  u32 out2in_node_index;&#xa;  u32 in2out_node_index;&#xa;  u32 in2out_output_node_index;" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="BXAtRn4mZZ8piuDLXr6t-2">
          <mxGeometry y="720" width="280" height="50" as="geometry" />
        </mxCell>
        <mxCell id="BXAtRn4mZZ8piuDLXr6t-21" value="nat44_config_t rconfig;" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="BXAtRn4mZZ8piuDLXr6t-2">
          <mxGeometry y="770" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="BXAtRn4mZZ8piuDLXr6t-23" value="u8 forwarding_enabled;" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="BXAtRn4mZZ8piuDLXr6t-2">
          <mxGeometry y="800" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="BXAtRn4mZZ8piuDLXr6t-24" value="  u8 static_mapping_only;&#xa;  u8 static_mapping_connection_tracking;" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="BXAtRn4mZZ8piuDLXr6t-2">
          <mxGeometry y="830" width="280" height="40" as="geometry" />
        </mxCell>
        <mxCell id="BXAtRn4mZZ8piuDLXr6t-25" value="u8 translation_memory_size_set;" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="BXAtRn4mZZ8piuDLXr6t-2">
          <mxGeometry y="870" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="BXAtRn4mZZ8piuDLXr6t-26" value="  u32 translation_buckets;&#xa;  u32 max_translations_per_thread;&#xa;  u32 *max_translations_per_fib;" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="BXAtRn4mZZ8piuDLXr6t-2">
          <mxGeometry y="900" width="280" height="50" as="geometry" />
        </mxCell>
        <mxCell id="BXAtRn4mZZ8piuDLXr6t-27" value="  u32 outside_vrf_id;&#xa;  u32 outside_fib_index;&#xa;  u32 inside_vrf_id;&#xa;  u32 inside_fib_index;" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="BXAtRn4mZZ8piuDLXr6t-2">
          <mxGeometry y="950" width="280" height="70" as="geometry" />
        </mxCell>
        <mxCell id="BXAtRn4mZZ8piuDLXr6t-28" value="nat_timeouts_t timeouts;" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="BXAtRn4mZZ8piuDLXr6t-2">
          <mxGeometry y="1020" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="BXAtRn4mZZ8piuDLXr6t-29" value="u16 mss_clamping;" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="BXAtRn4mZZ8piuDLXr6t-2">
          <mxGeometry y="1050" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="BXAtRn4mZZ8piuDLXr6t-30" value="  vlib_simple_counter_main_t total_sessions;&#xa;  u32 max_cfg_sessions_gauge" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="BXAtRn4mZZ8piuDLXr6t-2">
          <mxGeometry y="1080" width="280" height="40" as="geometry" />
        </mxCell>
        <mxCell id="BXAtRn4mZZ8piuDLXr6t-31" value="u16 mss_clamping;" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="BXAtRn4mZZ8piuDLXr6t-2">
          <mxGeometry y="1120" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="BXAtRn4mZZ8piuDLXr6t-32" value="u16 msg_id_base;" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="BXAtRn4mZZ8piuDLXr6t-2">
          <mxGeometry y="1150" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="BXAtRn4mZZ8piuDLXr6t-33" value="  vlib_log_class_t log_class;&#xa;  u8 log_level;" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="BXAtRn4mZZ8piuDLXr6t-2">
          <mxGeometry y="1180" width="280" height="40" as="geometry" />
        </mxCell>
        <mxCell id="BXAtRn4mZZ8piuDLXr6t-34" value="u16 msg_id_base;" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="BXAtRn4mZZ8piuDLXr6t-2">
          <mxGeometry y="1220" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="BXAtRn4mZZ8piuDLXr6t-35" value="  api_main_t *api_main;&#xa;  ip4_main_t *ip4_main;&#xa;  ip_lookup_main_t *ip4_lookup_main;" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="BXAtRn4mZZ8piuDLXr6t-2">
          <mxGeometry y="1250" width="280" height="50" as="geometry" />
        </mxCell>
        <mxCell id="BXAtRn4mZZ8piuDLXr6t-36" value="  fib_source_t fib_src_hi;&#xa;  fib_source_t fib_src_low;" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="BXAtRn4mZZ8piuDLXr6t-2">
          <mxGeometry y="1300" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="BXAtRn4mZZ8piuDLXr6t-37" value="  u8 pat;" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="BXAtRn4mZZ8piuDLXr6t-2">
          <mxGeometry y="1330" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="BXAtRn4mZZ8piuDLXr6t-38" value="u32 frame_queue_nelts;" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="BXAtRn4mZZ8piuDLXr6t-2">
          <mxGeometry y="1360" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="BXAtRn4mZZ8piuDLXr6t-39" value="u8 enabled; nat-ed使能标识位" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="BXAtRn4mZZ8piuDLXr6t-2">
          <mxGeometry y="1390" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="BXAtRn4mZZ8piuDLXr6t-40" value="vnet_main_t *vnet_main;" style="text;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="BXAtRn4mZZ8piuDLXr6t-2">
          <mxGeometry y="1420" width="280" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
